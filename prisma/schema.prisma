generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id              String         @id @default(cuid())
  email           String?        @unique
  password        String?
  phone           String?
  firstName       String?
  lastName        String?
  age             Int?
  city            String?
  district        String?
  country         String?
  jobId           String?
  genderId        String?
  bio             String?
  educationId     String?
  maritalStatusId String?
  intentionId     String?
  userStatus      String         @default("ONLINE")
  lastActiveAt    DateTime       @default(now())
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  likesReceived   Like[]         @relation("LikesReceived")
  likesSent       Like[]         @relation("LikesSent")
  job             Job?           @relation(fields: [jobId], references: [id])
  gender          Gender?        @relation(fields: [genderId], references: [id])
  education       Education?     @relation(fields: [educationId], references: [id])
  maritalStatus   MaritalStatus? @relation(fields: [maritalStatusId], references: [id])
  intention       Intention?     @relation(fields: [intentionId], references: [id])
  images          UserImage[]
  hobbies         Hobby[]        @relation("HobbyToUser")
}

model UserImage {
  id        String   @id @default(cuid())
  url       String
  userId    String
  order     Int      @default(0)
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Like {
  id         String   @id @default(cuid())
  senderId   String
  receiverId String
  status     String   @default("PENDING")
  createdAt  DateTime @default(now())
  receiver   User     @relation("LikesReceived", fields: [receiverId], references: [id])
  sender     User     @relation("LikesSent", fields: [senderId], references: [id])

  @@unique([senderId, receiverId])
}

model Hobby {
  id           String        @id
  name         String        @unique
  sortOrder    Int           @default(0)
  bioTemplates BioTemplate[]
  users        User[]        @relation("HobbyToUser")
}

model Job {
  id        String @id
  name      String @unique
  field     String @default("other")
  sortOrder Int    @default(0)
  users     User[]
}

model Gender {
  id        String @id
  name      String @unique
  sortOrder Int    @default(0)
  users     User[]
}

model BioTemplate {
  id        String  @id
  content   String  @unique
  sortOrder Int     @default(0)
  hobbyId   String?
  hobby     Hobby?  @relation(fields: [hobbyId], references: [id])
}

model IceBreaker {
  id        String @id
  content   String @unique
  sortOrder Int    @default(0)
}

model MaritalStatus {
  id        String @id
  name      String @unique
  sortOrder Int    @default(0)
  users     User[]
}

model Education {
  id        String @id
  name      String @unique
  sortOrder Int    @default(0)
  users     User[]
}

model Intention {
  id        String @id
  name      String @unique
  sortOrder Int    @default(0)
  users     User[]
}
